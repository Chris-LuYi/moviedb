{"version":3,"file":"static/js/post-message-init.js","mappings":"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","sources":["webpack://@module-federation/devtools/../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@module-federation/devtools/../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@module-federation/devtools/../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@module-federation/devtools/../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://@module-federation/devtools/../../node_modules/.pnpm/@babel+runtime@7.26.0/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack://@module-federation/devtools/./src/template/constant.ts","webpack://@module-federation/devtools/./src/utils/chrome/storage.ts","webpack://@module-federation/devtools/./src/utils/chrome/index.ts","webpack://@module-federation/devtools/./src/utils/chrome/post-message-init.ts"],"sourcesContent":["function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperty(e, r, t) {\n  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : e[r] = t, e;\n}\nexport { _defineProperty as default };","import defineProperty from \"./defineProperty.js\";\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nexport { _objectSpread2 as default };","export const FormID = 'FormID';\n\nexport const ENABLEHMR = 'enableHMR';\n\nexport const proxyFormField = 'proxyFormField';\n\nexport const defaultDataItem = {\n  key: '',\n  value: '',\n  checked: true,\n};\n\nexport const defaultModuleData = {\n  proxyFormField: [\n    {\n      ...defaultDataItem,\n    },\n  ],\n};\n\nexport const statusInfo: Record<\n  string,\n  {\n    status: string;\n    message: string;\n    color: string;\n  }\n> = {\n  noProxy: {\n    status: 'noProxy',\n    message: 'Modules are not currently proxied',\n    color: '#698cee',\n  },\n  processing: {\n    status: 'processing',\n    message: 'Obtaining remote module information',\n    color: '#FF7D00',\n  },\n  success: {\n    status: 'success',\n    message:\n      'The proxy configuration has taken effect and the corresponding page has been automatically refreshed.',\n    color: '#50b042',\n  },\n  error: {\n    status: 'error',\n    message:\n      'Calculating Snapshot failed, please confirm whether the package information is correct',\n    color: '#F53F3F',\n  },\n};\n\nexport const __ENABLE_FAST_REFRESH__ = 'enableFastRefresh';\n\nexport const BROWSER_ENV_KEY = 'MF_ENV';\n\nexport const __FEDERATION_DEVTOOLS__ = '__MF_DEVTOOLS__';\n","import {\n  mergeLocalStorage,\n  removeLocalStorageKey,\n  removeLocalStorage,\n  setLocalStorage,\n} from '../sdk';\nimport { injectScript } from './index';\n\nexport const mergeStorage = async (...args: any[]) =>\n  injectScript(mergeLocalStorage, false, ...args);\n\nexport const removeStorageKey = async (...args: any[]) =>\n  injectScript(removeLocalStorageKey, false, ...args);\n\nexport const removeStorage = async (...args: any[]) =>\n  injectScript(removeLocalStorage, false, ...args);\n\nexport const setStorage = async (...args: any[]) =>\n  injectScript(setLocalStorage, false, ...args);\n","import { GlobalModuleInfo } from '@module-federation/sdk';\nimport { FormID } from '../../template/constant';\nimport { definePropertyGlobalVal } from '../sdk';\n\nexport * from './storage';\n\nconst sleep = (num: number) => {\n  return new Promise<void>((resolve) => {\n    setTimeout(() => {\n      resolve();\n    }, num);\n  });\n};\n\nexport const injectPostMessage = (postMessageUrl: string) => {\n  const script = document.createElement('script');\n  script.src = postMessageUrl;\n  document.getElementsByTagName('head')[0].appendChild(script);\n};\n\nexport const TabInfo = {\n  currentTabId: 0,\n};\n\nexport function getCurrentTabId() {\n  return TabInfo.currentTabId;\n}\n\nexport function getInspectWindowTabId() {\n  return new Promise((resolve, reject) => {\n    if (chrome?.devtools?.inspectedWindow) {\n      // @ts-expect-error In dev mode, should resolve by hand\n      if (chrome.isDevMode) {\n        resolve(0);\n      }\n      chrome.devtools.inspectedWindow.eval(\n        'typeof window.__FEDERATION__ !== \"undefined\" || typeof window.__VMOK__ !== \"undefined\"',\n        function (info, error) {\n          const { tabId } = chrome.devtools.inspectedWindow;\n          getTabs().then((tabs) => {\n            const target = tabs.find(\n              (tab: chrome.tabs.Tab) => tab.id === tabId,\n            );\n            window.targetTab = target as chrome.tabs.Tab;\n          });\n          console.log(\n            'chrome.devtools.inspectedWindow.tabId',\n            chrome.devtools.inspectedWindow.tabId,\n          );\n          TabInfo.currentTabId = tabId;\n          resolve(tabId);\n          if (error) {\n            reject(error);\n          }\n        },\n      );\n    } else {\n      // chrome devtool e2e test，The test window opens independently\n      if (window.targetTab && window.targetTab.id) {\n        const tabId = window.targetTab.id;\n        TabInfo.currentTabId = tabId;\n        resolve(tabId);\n      } else {\n        throw Error(`can't get active tab`);\n      }\n    }\n  });\n}\n\nexport const getGlobalModuleInfo = async (\n  callback: React.Dispatch<React.SetStateAction<GlobalModuleInfo>>,\n) => {\n  await sleep(300);\n\n  chrome.runtime.onMessage.addListener(\n    (message: { origin: string; data: any }) => {\n      const { origin, data } = message;\n\n      if (!data || data?.appInfos) {\n        return;\n      }\n      if (!window?.__FEDERATION__) {\n        definePropertyGlobalVal(window, '__FEDERATION__', {});\n        definePropertyGlobalVal(window, '__VMOK__', window.__FEDERATION__);\n      }\n      window.__FEDERATION__.originModuleInfo = JSON.parse(\n        JSON.stringify(data?.moduleInfo),\n      );\n      if (data?.updateModule) {\n        const moduleIds = Object.keys(window.__FEDERATION__.originModuleInfo);\n        const shouldUpdate = !moduleIds.some((id) =>\n          id.includes(data.updateModule.name),\n        );\n        if (shouldUpdate) {\n          const destination =\n            data.updateModule.entry || data.updateModule.version;\n          window.__FEDERATION__.originModuleInfo[\n            `${data.updateModule.name}:${destination}`\n          ] = {\n            remoteEntry: destination,\n            version: destination,\n          };\n        }\n      }\n      window.__FEDERATION__.moduleInfo = JSON.parse(\n        JSON.stringify(window.__FEDERATION__.originModuleInfo),\n      );\n      callback(window.__FEDERATION__.moduleInfo);\n    },\n  );\n  const postMessageStartUrl = getUrl('post-message-start.js');\n  await injectScript(injectPostMessage, false, postMessageStartUrl);\n};\n\nexport const getTabs = (queryOptions = {}) => chrome.tabs.query(queryOptions);\n\nexport const getScope = async () => {\n  const activeTab = window.targetTab;\n  const favIconUrl = activeTab?.favIconUrl;\n  return favIconUrl || 'noScope';\n};\n\nexport const injectScript = async (\n  excuteScript: (...args: Array<any>) => any,\n  world = false,\n  ...args: any\n) => {\n  await getInspectWindowTabId();\n  return chrome.scripting\n    .executeScript({\n      target: {\n        tabId: getCurrentTabId(),\n      },\n      func: excuteScript,\n      world: world ? 'MAIN' : 'ISOLATED',\n      args,\n    })\n    .then(() => {\n      console.log('InjectScript success, excuteScript:', args);\n    })\n    .catch((e) => {\n      console.log(e, 'InjectScript fail, excuteScript:', args);\n    });\n};\n\nexport const getUrl = (file: string) => {\n  try {\n    const pathSet = chrome.runtime.getURL(file).split('/');\n    const fileName = pathSet.pop() as string;\n\n    pathSet.push('static', 'js', fileName);\n    return pathSet.join('/');\n  } catch (e) {\n    return '';\n  }\n};\n\nexport const injectToast = (toastUtilUrl: string, e2eFlag: string) => {\n  const ele = document.querySelector(`[data-e2e=${e2eFlag}]`);\n  if (ele) {\n    return;\n  }\n\n  const scriptToast = document.createElement('script');\n  scriptToast.src = toastUtilUrl;\n  scriptToast.dataset.e2e = e2eFlag;\n  document.getElementsByTagName('head')[0].appendChild(scriptToast);\n};\n\nexport const setChromeStorage = (formData: Record<string, any>) => {\n  getScope().then(async (scope) => {\n    const data = await chrome.storage.sync.get('FormID');\n\n    const storeData = data[FormID];\n    const scopes = Object.keys(storeData || {});\n\n    // Remove outdated data to avoid exceeded memory\n    let filterOutDatedData = storeData || {};\n    const { length } = scopes;\n    if (length >= 10) {\n      filterOutDatedData = scopes\n        .slice(0, length - 3)\n        .reduce((memo: Record<string, any>, cur) => {\n          memo[cur] = storeData[cur];\n          return memo;\n        }, {});\n    }\n\n    const existRules = storeData?.[scope];\n    chrome.storage.sync.set({\n      [FormID]: {\n        ...filterOutDatedData,\n        [scope]: {\n          ...existRules,\n          ...formData,\n        },\n      },\n    });\n  });\n};\n","import { getUrl } from './index';\n\nconst postMessageUrl = getUrl('post-message.js');\nconst script = document.createElement('script');\nscript.src = postMessageUrl;\ndocument.getElementsByTagName('html')[0].appendChild(script);\n"],"names":["FormID","ENABLEHMR","proxyFormField","defaultDataItem","key","value","checked","defaultModuleData","_objectSpread","statusInfo","noProxy","status","message","color","processing","success","error","__ENABLE_FAST_REFRESH__","BROWSER_ENV_KEY","__FEDERATION_DEVTOOLS__","mergeLocalStorage","removeLocalStorageKey","removeLocalStorage","setLocalStorage","injectScript","mergeStorage","_ref","_asyncToGenerator","args","apply","arguments","removeStorageKey","_ref2","removeStorage","_ref3","setStorage","_ref4","definePropertyGlobalVal","sleep","num","Promise","resolve","setTimeout","injectPostMessage","postMessageUrl","script","document","createElement","src","getElementsByTagName","appendChild","TabInfo","currentTabId","getCurrentTabId","getInspectWindowTabId","reject","_chrome","chrome","devtools","inspectedWindow","isDevMode","eval","info","tabId","getTabs","then","tabs","target","find","tab","id","window","targetTab","console","log","Error","getGlobalModuleInfo","callback","runtime","onMessage","addListener","_window","origin","data","appInfos","__FEDERATION__","originModuleInfo","JSON","parse","stringify","moduleInfo","updateModule","moduleIds","Object","keys","shouldUpdate","some","includes","name","destination","entry","version","remoteEntry","postMessageStartUrl","getUrl","_x","queryOptions","query","getScope","activeTab","favIconUrl","excuteScript","world","scripting","executeScript","func","catch","e","_x2","file","pathSet","getURL","split","fileName","pop","push","join","injectToast","toastUtilUrl","e2eFlag","ele","querySelector","scriptToast","dataset","e2e","setChromeStorage","formData","scope","storage","sync","get","storeData","scopes","filterOutDatedData","length","slice","reduce","memo","cur","existRules","set","_x3"],"sourceRoot":""}